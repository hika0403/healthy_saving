<!doctype html>
<html lang="ja" >
  <head>
    <title>ダッシュボードテンプレート for Bootstrap · Bootstrap</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <link href="dashboard.css" rel="stylesheet">
    <link href="../example.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
      a, a:visited, a:focus, a:hover {
        text-decoration: none;
      }
      /* 写真の導入 */
      /* .jumbotron { 
        background:url(github.png) center no-repeat; background-size: cover;
      } */

      /* Chart.js */
      @-webkit-keyframes chartjs-render-animation {
        from{opacity:0.99}to{opacity:1}}@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;
      }

      /* sidebar */
      .nav-link {
        color: black;
      }
      .nav-link:hover {
        color: #F9C80E;
      }

      /* main */
      main {
        background-color: whitesmoke;
      }
    </style>
  </head>
  <body class="h-100">

    <%# header %>
    <%= render 'shared/header' %>

    <div class="container-fluid">
      <div class="row">
        <%# sidebar %>
        <aside class="main-sidebar col-12 col-md-3 col-lg-2 px-0 border-end">
          <div class="nav-wrapper">
            <ul class="nav flex-column">
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/money/new">
                  <span data-feather="plus-circle"></span>
                  Today's Record
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/money/show">
                  <span data-feather="dollar-sign"></span>
                  Money Record
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/bodies/show">
                  <span data-feather="bar-chart-2"></span>
                  Weight Record
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/users/edit">
                  <span data-feather="users"></span>
                  User Profile
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/money">
                  <span data-feather="home"></span>
                  Top Page
                </a>
              </li>
            </ul>
          </div>
        </aside>

        <%# main-content %>
        <main class="main-content col-lg-10 col-md-9 col-sm-12 p-0">
          <div class="main-content-container container-fluid px-4">
            <div class="page-header row no-gutters py-4">
              <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
                <h3 class="page-title">TOPPAGE</h3>
              </div>
            </div>
            <% unless @goal.present? %> 
              <div class="row">
                <div class="card card-small mb-4 pt-3 text-center">
                  <div class="md-8">
                    <%= image_tag "goal_index.jpg", class:"rounded-circle", width:"250" %>
                  </div>
                  <div class="card-body">
                    <h4 class="card-title md-0">目標を設定しよう！</h4>
                    <p class="card-text text-muted d-block mb-2">いつまでに達成するのかなど具体的な目標を立てよう</p>
                    <%= link_to 'START', new_goal_path, class: "mb-2 btn btn-lg btn-pill btn-outline-success mr-2" %>
                  </div>
                </div>
              </div>
            <% end %> 

            <% if @goal.present? %>
            <% @goal.each do |goal| %>
              <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Goal</h1>
                <h2 class="text-info"><%= goal.period %></h2>
                <p>までに</p>
                <h2 class="text-info"><%= goal.purpose %></h2>
                <div class="btn-toolbar mb-2 mb-md-0">
                  <div>
                    <%= link_to '変更する', goal_path(goal.id), class: "btn" %>
                    <%= link_to 'delete', goal_path(goal.id), method: :delete, class:"btn btn-primary btn-lg rounded-pill float-right" %>
                  </div>
                </div>
              </div>

              <section class="text-center text-muted">
                <div class="container">
                  <div class="row">
                    <div class="col-sm-5 mb-5 mb-md-0">
                      <div class="stat">
                        <h3><%= goal.period %></h3>
                        <p>いつまで</p>
                      </div>
                    </div>
                    <div class="col-sm-3 mb-5 mb-md-0">
                      <div class="stat">
                        <h3><%= goal.saving_goal %><b>円</b></h3>
                        <p>貯金金額</p>
                      </div>
                    </div>
                    <div class="col-sm-3">
                      <div class="stat">
                        <h3><%= goal.weight_goal %><b>kg</b></h3>
                        <p>体重</p>
                      </div>
                    </div>
                  </div>
                </div>
              </section>

            <% end %>
            <%= column_chart @money.group_by_day(:created_at).sum(:saving_amount), xtitle: "日付", ytitle: "貯金額(円)" %>
            <%= area_chart @bodies.group_by_day(:created_at).sum(:weight), xtitle: "日付", ytitle: "体重(KG)" %>
            <% end %>
          </div>
        </main>
      </div>
    </div>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script>
      feather.replace()
    </script>


    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script>
      window.jQuery || document.write('<script src="/docs/4.4/assets/js/vendor/jquery-slim.min.js"><\/script>')
    </script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script><script src="/docs/4.4/assets/js/vendor/anchor.min.js"></script>
    <script src="/docs/4.4/assets/js/vendor/clipboard.min.js"></script>
    <script src="/docs/4.4/assets/js/vendor/bs-custom-file-input.min.js"></script>
    <script src="/docs/4.4/assets/js/src/application.js"></script>
    <script src="/docs/4.4/assets/js/src/search.js"></script>
    <script src="/docs/4.4/assets/js/src/ie-emulation-modes-warning.js"></script>
  </body>
</html>