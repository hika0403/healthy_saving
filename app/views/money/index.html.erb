<!doctype html>
<html lang="ja" >
  <head>
    <title>ダッシュボードテンプレート for Bootstrap · Bootstrap</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <link href="dashboard.css" rel="stylesheet">
    <link href="../example.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@900&display=swap" rel="stylesheet">
    <style type="text/css">
      a, a:visited, a:focus, a:hover {
        text-decoration: none;
      }
      /* main container background */
      .main-content-container {
        background-image: linear-gradient(to top, #c1dfc4 0%, #deecdd 100%);
      }
      /* Chart.js */
      @-webkit-keyframes chartjs-render-animation {
        from{opacity:0.99}to{opacity:1}
      }
      @keyframes chartjs-render-animation {
        from{opacity:0.99}to{opacity:1}
      }
      .chartjs-render-monitor {
        -webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;
      }
      /* sidebar */
      .nav-link {
        color: black;
      }
      .nav-link:hover {
        color: #F9C80E;
      }
      /* goal 見出し */
      .ribbon-text {
        color: #5c8584;
        font-size: 70px;
        font-weight: 900;
        letter-spacing: .1em;
      }
      /* goal startbtn */
      .start-btn {
        position: relative;
        background-color: #ceb849;
        border: 1px solid transparent;
        border-radius: 35px;
        width: 350px;
        font-size: 70px;
      }
      .start-btn :before {
        content: '';
        position: absolute;
        top: -5px;
        left: -5px;
        width: 100%;
        height: 100%;
        background-color: transparent;
        border: 1px solid #333;
        border-radius: 35px;
      }
      /* goal 見出し */
      .goal-title {
        font-family: 'Teko', sans-serif;
        font-size: 100px;
        padding: 40px;
      }
      .money-title {
        color: #FFD700;
      }
      .weight-title {
        color: #3CB371;
      }
      /* うまい棒BOX */
      .hitokoto{
        background: rgba(255, 229, 178, 0.61);
        margin: 2em 0;
        padding: 25px;
        border-radius: 10px;
      }
      .hitokoto-circle1{
        font-size: 16px;
        line-height: 1.5;
        position: absolute;
        margin-top: -37px;
        font-weight: bold;
        color: #fff;
        background-color:#ffa726;
        border-radius: 50%;
        text-align: center;
        width: 24px;
        height: 24px;
      }
      .hitokoto-circle1:after{
        content: "め";
        position: absolute;
        margin-top: .2em;
        font-weight: bold;
        color: #fff;
        background-color:#ffa726;
        border-radius: 50%;
        text-align: center;
        width: 24px;
        height: 24px;
      }
      .hitokoto-circle2:before{
        content: "";
        position: absolute;
        top: 100%;
        margin-left: -12px;
        border: 5px solid transparent;
        border-top: 10px solid #ffa726;
        -ms-transform: rotate(-20deg);
        -webkit-transform: rotate(-20deg);
        transform: rotate(-20deg);
      }
      .hitokoto-circle2{
        position: absolute;
        font-size: 16px;
        line-height: 1.5;
        margin-top: -37px;
        margin-left: 40px;
        font-weight: bold;
        color: #fff;
        background-color:#ffa726;
        border-radius: 50%;
        text-align: center;
        width: 24px;
        height: 24px;
      }
      .hitokoto-circle2:after{
        content: "識";
        position: absolute;
        margin-top: .2em;
        font-weight: bold;
        color: #fff;
        background-color:#ffa726;
        border-radius: 50%;
        text-align: center;
        width: 24px;
        height: 24px;
      }
      .hitokoto p{
        margin: 0;
        padding: 0;
      }      
      .box-p2 {
        font-family: 'M PLUS 1p', sans-serif;
        color: #f00;
        font-size: 20px;
        text-shadow:1px 0 0 black;
      }
      .box-p3 {
        font-size: 50px;
        font-weight: 600;
      }
      .box-p4 {
        font-size: 50px;
      }
    </style>
  </head>
  <body>

    <%# header %>
    <%= render 'shared/header' %>

    <div class="container-fluid">
      <div class="row">
        <%# sidebar %>
        <aside class="main-sidebar col-md-3 col-lg-2 px-20 border-end">
          <div class="nav-wrapper">
            <ul class="nav flex-column">
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/money/new">
                  <span data-feather="plus-circle"></span>
                  Today's Record
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/money/show">
                  <span data-feather="dollar-sign"></span>
                  Money Record
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/bodies/show">
                  <span data-feather="bar-chart-2"></span>
                  Weight Record
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/users/edit">
                  <span data-feather="users"></span>
                  User Profile
                </a>
              </li>
              <li class="nav-item border-bottom py-3">
                <a class="nav-link" href="/money">
                  <span data-feather="home"></span>
                  Top Page
                </a>
              </li>
            </ul>
          </div>
        </aside>

        <%# main-content %>
        <main class="main-content col-lg-10 col-md-9 col-sm-12">
          <div class="main-content-container container-fluid py-5 px-3">
            <% unless @goal.present? %> 
              <div class="row">
                <div class="text-center">
                  <span class="ribbon-text">Welcome!<%= "#{current_user.nickname}さん" %></span>
                  <%= image_tag "goal_index.jpg", class:"goal-image rounded-circle mb-5", width:"700" %>
                  <h2 class="d-block my-3">ユーザー新規登録が完了！</h2>
                  <h2 class="d-block mt-3 mb-5">次に目標を立てよう！目標は何度でも変更できるよ</h2>
                  <i class="start-btn px-3 py-1 fas fa-play-circle"><%= link_to 'START', new_goal_path, class:"btn" %></i>
                </div>
              </div>
            <% end %> 

            <div class="row">
            <% if @goal.present? %>
            <% @goal.each do |goal| %>
              <div class="col-12 d-flex">
                <div class="goal-wrap">
                  <span class="goal-title" ><span class="text-warning">G</span>OAL</span>
                  <span class="h2"><%= goal.period.strftime('%Y年%m月%d日') %>
                  <span>までに</span>
                  <span class="h2 font-weight-bold", style="font-size: 50px;   background: linear-gradient(transparent 50%, #00FF00 50%);"><%= goal.purpose %></span>
                </div>
                <div class="m-auto mr-5 d-flex">
                  <%= link_to 'edit', goal_path(goal.id), class: "btn btn-lg btn-outline-success mx-3" %>
                  <%= link_to 'delete', goal_path(goal.id), method: :delete, class:"btn btn-lg btn-outline-success" %>
                </div>
              </div>

              <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
                <div class="card card-stats mb-4 mb-xl-0 shadow">
                  <div class="card-body d-flex">
                    <div class="row">
                      <div class="col py-3">
                        <div class="h2 card-title mb-5 text-muted"><i class="money-title fas fa-comment-dollar"></i>Saving Money</div>
                        <h3 class="card-title text-muted">Total</h3>
                        <div class="box">
                          <div class="h1 font-weight-bold mb-3">￥<%= Money.sumprice %></div>
                          <div class="hitokoto">
                              <span class="hitokoto-circle1">ま</span>
                              <span class="hitokoto-circle2">知</span>
                              <p class="box-p1">現在、<span class="box-p2">うまい棒</span></p>
                              <p class="box-p4"><span class="box-p3"><%= Money.umai %></span>本分です</p>
                          </div>
                        </div>
                        <h3 class="card-title text-muted">Goal</h3>
                        <div class="h1 font-weight-bold">￥<%= goal.saving_goal %></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-8 col-md-8 col-sm-12 mb-4">
                <div class="card card-stats mb-4 mb-xl-0 shadow">
                  <div class="card-body d-flex">
                    <div class="row m-auto">
                      <div class="col">
                        <div class="h2 card-title text-muted"><i class="money-title fas fa-comment-dollar"></i>Saving Money</div>
                        <%= column_chart @money.group_by_day(:created_at, last: 7).sum(:saving_amount), xtitle: "日付", ytitle: "貯金額(円)", colors: ["#FFD700"], width: "500px" %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-8 col-md-8 col-sm-12 mb-4">
                <div class="card card-stats mb-4 mb-xl-0 shadow">
                  <div class="card-body d-flex">
                    <div class="row m-auto">
                      <div class="col">
                        <div class="h2 card-title text-muted"><i class="weight-title fas fa-weight"></i>Lose Weight</div>
                        <%= area_chart @bodies.group_by_day(:created_at, last: 7).sum(:weight), xtitle: "日付", ytitle: "体重(KG)", colors: ["#3CB371"], width: "500px" %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
                <div class="card card-stats mb-4 mb-xl-0 shadow">
                  <div class="card-body d-flex">
                    <div class="row">
                      <div class="col py-3">
                        <div class="h2 card-title mb-5 text-muted"><i class="weight-title fas fa-weight"></i>Lose Weight</div>
                        <h3 class="card-title text-muted">My weight</h3>
                        <div class="h1 font-weight-bold mb-3"><%= Body.recentweight %>KG</div>
                        <h3 class="card-title text-muted">Goal</h3>
                        <div class="h1 font-weight-bold"><%= goal.weight_goal %>KG</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
            <% end %>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script>
      feather.replace()
    </script>


    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script>
      window.jQuery || document.write('<script src="/docs/4.4/assets/js/vendor/jquery-slim.min.js"><\/script>')
    </script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script><script src="/docs/4.4/assets/js/vendor/anchor.min.js"></script>
    <script src="/docs/4.4/assets/js/vendor/clipboard.min.js"></script>
    <script src="/docs/4.4/assets/js/vendor/bs-custom-file-input.min.js"></script>
    <script src="/docs/4.4/assets/js/src/application.js"></script>
    <script src="/docs/4.4/assets/js/src/search.js"></script>
    <script src="/docs/4.4/assets/js/src/ie-emulation-modes-warning.js"></script>
  </body>
</html>